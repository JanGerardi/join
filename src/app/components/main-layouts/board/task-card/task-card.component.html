<div class="task-card">
    <div class="flex">
        <div class="category" [style.background]="categoryData?.color || '#0038FF'">
            <span>{{ categoryData?.title || 'Unbekannt'}}</span>
        </div>
        @if (isMobile) {
            <button mat-icon-button (click)="openMoveMenu(task, $event)" [style.background]="categoryData?.color || '#0038FF'">
                <mat-icon>more_vert</mat-icon>
            </button>
        }
    </div>

    <div class="description">
        <h4>{{ task.title }}</h4>
        <span>{{ task.description }}</span>
    </div>
    @if (totalSubtasks > 1) {
        <div class="progression"> <!-- TO-DO: if-condition when there is more than 1 subtask ðŸ¦† -->
            <div class="progress-bar">
                <div class="progress-fill" [style.width.%]="progressPercent"></div>
            </div>
            <div class="subtasks-text">
                {{ completedSubtasks }}/{{ totalSubtasks }} Subtasks
            </div>
        </div>
    }
    <div class="overview">
        <div class="user-icons">
            @for (user of assignedContacts; track user.id) {
                <div class="user-circle" [style.background]="user.color">
                    {{ user.avatar }}
                </div>
            }
            @if (remainingUsers > 0) {
                <div class="user-circle extra">
                    +{{ remainingUsers }}
                </div>
            }
        </div>
        @if (priorityData){
            <div [class]="priorityData.icon" [style.color]="priorityData.color"></div>
        }
    </div>
</div>